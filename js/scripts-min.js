// add your custom scripts here
// as the page loads, call these scripts
function flo_ajax_pagination(){jQuery(".pag").on("click",".page-numbers",function(e){e.preventDefault();jQuery(".flo-page-number").val(jQuery(this).data("pagenumber"));setTimeout(function(){flo_filter_projects()},200)})}function flo_filter_projects(){jQuery.ajax({url:flo.ajax_load_url,data:"&action=filter_projects&"+jQuery(".flo-projects-filter :input").serialize(),type:"POST",cache:!1,success:function(e){jQuery(".flo-projects").html(e);flo_ajax_pagination()}})}jQuery(function(e){e(".flo-date-filter").datepicker();e(".flo-tag-filter").autocomplete({source:flo.ajax_load_url+"?action=search_tag&params="+jQuery(this).val(),minLength:2,select:function(e,t){if(typeof t.item.data!="undefined"){console.log(t.item.data);jQuery(".flo-tag-filter-value").val(t.item.data);flo_filter_projects()}}});e(".flo-member-filter").autocomplete({source:flo.ajax_load_url+"?action=search_members&params="+jQuery(this).val(),minLength:2,select:function(e,t){if(typeof t.item.data!="undefined"){console.log(t.item.data);jQuery(".flo-member-filter-value").val(t.item.data);flo_filter_projects()}}});e(".tag-filter .ui-autocomplete-input, .team-member-filter .ui-autocomplete-input").on("change",function(){e(this).parent().find(".hidden-filter-input").val("");console.log(e(this).parent().find(".hidden-filter-input").val())});e(".flo-filter-input").on("change",function(){flo_filter_projects()});e(".clear-input").on("click",function(){if(e.trim(e(this).parent().find("input[type=hidden]").val())!=""){e(this).parent().find("input").val("");flo_filter_projects()}else e(this).parent().find("input").val("")});flo_ajax_pagination()});Modernizr.load([{test:Modernizr.borderradius,nope:[flo.template_dir+"/js/libs/selectivizr.js",flo.template_dir+"/js/libs/respond.js"]},{test:Modernizr.touch,yep:flo.template_dir+"/css/touch.css"}]);jQuery(function(e){var t=e("#post").length,n=e("article.post");e.flo={elements:{posts:e("article.post"),w:e(window),b:e("body"),h:e("#header-main"),l:e("#loading-main")},options:{slider:{animation:"slide",slideshow:!1,controlNav:!1},is_mobile:parseInt(flo.is_mobile,10),is_single:e("#post").length},helpers:{place_entry_text:function(t,n){n=e(n);var r,i;i=n.find("span.wrap");r=n.find("span.title-wrap");i.css("padding-top",(i.height()-r.height())/2)},remove_entry_padding:function(t,n){e(n).find("span.wrap").css("padding-top",0)},"goto":function(t){e("body,html").animate({scrollTop:t.offset().top},750)},pin_load:function(){js=e('script[src*="assets.pinterest.com/js/pinit.js"]');js.remove();var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="http://assets.pinterest.com/js/pinit.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}},lazy:function(t,n,r){t.lazyloader("img",{duration:500,before_show:function(t){e(t).closest(n).removeClass("loading")},addScrollTo:r})}};e.flo.ajax_complete=function(){try{if(!e.flo.elements.posts.length)return;FB.XFBML.parse();gapi.plusone.go();twttr.widgets.load();e.flo.helpers.pin_load()}catch(t){}};e.flo.global_init=function(){e("a[rel$=external]").each(function(){e(this).attr("target","_blank")});e.flo.elements.w.load(function(){e.flo.elements.l.fadeOut(800)});e(document).ajaxComplete(e.flo.ajax_complete)};e.fn.init_posts=function(){var t=function(t){t.post.siblings(".open-post").find("a.toggle").trigger("click",{hide:!0});var n=t.post.find("span.loading");if(t.more.is(":empty")){t.post.addClass("post-loading");n.css("visibility","visible");t.more.load(flo.ajax_load_url,{action:"flotheme_load_post",id:t.post.data("post-id")},function(){n.remove();t.more.slideDown(400,function(){t.post.addClass("open-post");t.toggler.text("Close Post");e(".video",t.more).fitVids();t.scroll&&t.scroll.scrollTo("fast")});t.post.init_jsscroll_pane();r(t.post)})}else t.more.slideDown(400,function(){t.post.addClass("open-post");t.toggler.text("Close Post");t.scroll&&t.scroll.scrollTo("fast")})},n=function(n,r){n.preventDefault();var i={toggler:e(this),scroll:!1},s=e.extend({comments:!1,hide:!1,add_comment:!1},r);i.post=i.toggler.parents("article.post");i.more=i.post.find(".full");if(i.more.is(":visible")){s.hide===!0?i.more.hide():i.more.slideUp(400);i.toggler.text("Open Post");i.post.removeClass("open-post")}else{typeof n.originalEvent!="undefined"&&(i.scroll=i.post);t(i)}},r=function(t){var n=e("section.respond",t),r=e("form",n),i=e("p.error",r),s=e(".cancel-comment-reply a",n),o=e("section.comments",t);o.find(".scroll-pane").jScrollPane({autoReinitialise:!0,verticalDragMinHeight:67,animateScroll:!0});e("a.comment-reply-link",t).on("click",function(r){r.preventDefault();var i=e(this).parents("li.comment");i.find(">div").append(n);s.show();n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(i.data("comment-id"));n.find("input:first").focus()}).attr("onclick","");s.on("click",function(r){r.preventDefault();o.after(n);n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(0);e(this).hide()});n.find("form").validate();n.find("input, textarea").placeholder();r.ajaxForm({beforeSubmit:function(){i.text("").hide()},success:function(r){var u=e.parseJSON(r);if(u.error){i.html(u.msg).slideDown("fast");return}var a=n.find("input[name=comment_parent]").val(),f=e(jQuery.parseHTML(u.html)),l=t.find(".meta .comments"),c=t.find("div.messages"),h;f.hide();if(a==0){h=o.find("ol");if(!h.length){h=e('<ol class="commentlist"></ol>');o.append(h)}}else{h=e("#comment-"+a).parent().find("ul");if(!h.length){h=e('<ul class="children"></ul>');e("#comment-"+a).parent().append(h)}s.trigger("click")}h.append(f);n.find("textarea").clearFields();l.text(o.find("ol li").length);var p=o.find(".scroll-pane").data("jsp");f.show();setTimeout(function(){p.scrollTo(0,f.position().top)},1e3);c.hide().html("Thank you for submitting your comment!").slideDown("fast");setTimeout(function(){c.slideUp("fast")},1e4)},error:function(e){var t;if(t=e.responseText.match(/<p\>(.*)<\/p\>/))t=t[1];typeof t=="undefined"&&(t="Something went wrong. Please reload the page and try again.");i.html(t).slideDown("fast")}})};e(this).each(function(){var t=e(this);t.find(".full").lazyloader("img",{duration:500});e.flo.elements.w.load(function(){e(".preview .flexslider",t).flexslider(e.flo.options.slider)});if(!e.flo.options.is_mobile&&flo.ajax_posts){e("a.toggle",t).click(n);e(".video",t).fitVids();e(".preview figure a",t).click(function(t){t.preventDefault();e(this).parents("article.post").find("a.toggle").trigger("click")})}});e.flo.options.is_single&&parseInt(flo.ajax_comments,10)&&r(e.flo.elements.posts);parseInt(flo.ajax_open_single,10)&&!e.flo.options.is_single&&e.flo.elements.posts.length===1&&e.flo.elements.posts.find("a.toggle").trigger("click")};e.flo.elements.posts.init_posts();e.fn.init_gallery=function(){e(this).each(function(){var t=e(this);e.flo.elements.w.load(function(){e(".flexslider",t).flexslider(e.flo.options.slider)})})};e("#gallery").init_gallery();e.fn.init_archives=function(){e(this).each(function(){var t=e(this),n=e("#archives-active-year"),r=e("div.months div.year-months",t),i=e("a.up, a.down",t),s,o,u,a=!1;if(r.length==1){i.remove();s=r.filter(":first").addClass("year-active").show();n.text(s.attr("id").replace(/[^0-9]*/,""));return}i.click(function(t){t.preventDefault();if(a)return;var s=e(this);a=!0;i.css("visibility","visible");var o=r.filter(".year-active");if(s.hasClass("up")){u=o.prev();u.length||(u=r.filter(":last"))}else{u=o.next();u.length||(u=r.filter(":first"))}o.removeClass("year-active").fadeOut(150,function(){u.addClass("year-active").fadeIn(150,function(){a=!1});n.text(u.attr("id").replace(/[^0-9]*/,""));s.hasClass("up")?u.prev().length||i.filter(".up").css("visibility","hidden"):u.next().length||i.filter(".down").css("visibility","hidden")})});s=r.filter(":first").addClass("year-active").show();n.text(s.attr("id").replace(/[^0-9]*/,""));i.filter(".up").css("visibility","hidden")})};e("#archives .flo-archives").init_archives()});